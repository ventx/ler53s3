<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>ler53s3</h1><p>ler53s3 is a nodejs tool to request let's encrypt certificates and store the issued certificates in s3</p>
<h2>CLI usage</h2><pre class="prettyprint source lang-bash"><code>npm install -g @ventx/ler53s3

ler53s3 -d &quot;host.myreallycoolanduniquedomainnamethatguaranteeddoesexistspromised.com&quot; \
        -e &quot;no@name.org&quot; \
        -z &quot;myreallycoolanduniquedomainnamethatguaranteeddoesexistspromised.com&quot; \
        -b &quot;mybucket&quot;
        -k &quot;cert/host.myreallycoolanduniquedomainnamethatguaranteeddoesexistspromised.com/&quot;</code></pre><p>Parameters</p>
<ul>
<li><strong>d</strong> The Domain to issue an certificate for</li>
<li><strong>e</strong> The Email to use for the certificate</li>
<li><strong>z</strong> The route53 zone name which manages the domain. <strong>You need write access here</strong></li>
<li><strong>b</strong> A bucket to store the certificate to</li>
<li><strong>k</strong> A s3 key prefix to use </li>
</ul>
<h2>Lambda</h2><pre class="prettyprint source lang-bash"><code>git clone https://github.com/ventx/ler53s3.git
    cd trackbone
    npm install
    zip -r lambda.zip 'lambda.js' 'cert.js' './node_modules'</code></pre><p>You have two options for using this as a lambda function. </p>
<ol>
<li><p>Lambda proxy function
You may use the handler &quot;lambda.proxy_handle&quot;. This function you can use with an API Gateway as a proxy
method. It will only accept POST requests and you need to provide the following parameters in the request body (The options just have other names than in the cli, but are the same. So see the description from above):</p>
</li>
<li><p>domain</p>
</li>
<li>email</li>
<li>zoneName</li>
<li>bucketName</li>
<li>keyPrefix</li>
</ol>
<p>All Options are required. You will get a 200 response, if everything worked and the certificate is stored
in s3. For security reasons you won't get the certificate in the output of the function call. So the certificate won't leave the AWS infrastructure.</p>
<ol>
<li>Regular lambda function
You may use the handler &quot;lambda.handle&quot;. Parameters are the same as in the proxy handler function.</li>
</ol>
<h2>Programmatic usage</h2><p>You may also use the library in your modules/projects/scripts/whatever</p>
<pre class="prettyprint source lang-javascript"><code>const ler53s3 = require('ler53s3');

ler53s3(domain, email, zoneName, bucketName, keyPrefix)
    .then(() => console.log('Sucess!!'))
    .catch((err) => console.log('Error :( ', err));</code></pre></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Feb 09 2018 12:01:07 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>